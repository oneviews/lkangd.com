window.__NUXT__=function(e,o,s,n){return{layout:"default",data:[{post:{attributes:{title:"ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å†™ super(props) ï¼Ÿ",date:e,spoiler:"ç»“å°¾å¤„æœ‰å½©è›‹ã€‚",featured:!0,link:s,min2read:n,wordcount:"1.4k"},body:'<p>æ®è¯´ <a href="https://reactjs.org/docs/hooks-intro.html">Hooks</a> åŠ¿å¤´æ­£ç››ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æƒ³ç•¥å¸¦è°ƒä¾ƒåœ°ä» <em>class</em> çš„æœ‰è¶£ä¹‹å¤„å¼€å§‹è¿™ç¯‡åšå®¢ã€‚å¯è¿˜è¡Œï¼Ÿ</p>\n<p><strong>è¿™äº›æ¢—å¯¹äºä½¿ç”¨ React è¾“å‡ºäº§å“å¹¶<em>ä¸</em>é‡è¦ï¼Œä½†å¦‚æœä½ æƒ³æ·±å…¥çš„äº†è§£å®ƒä»¬çš„è¿ä½œåŸç†ï¼Œå®ƒä»¬ä¼šéå¸¸çš„æœ‰ç”¨ã€‚</strong></p>\n<hr>\n<p>é¦–å…ˆï¼Œåœ¨è¿™ä¸€ç”Ÿä¸­ï¼Œ<code>super(props)</code> å‡ºç°åœ¨æˆ‘ä»£ç é‡Œçš„æ¬¡æ•°æ¯”æˆ‘çŸ¥é“çš„è¿˜è¦å¤šï¼š</p>\n<pre data-line="3,"  3="" class="language-jsx"><code 3="" class="language-jsx">class Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOn: true };\n  }\n  // ...\n}\n</code></pre><p>å½“ç„¶äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <a href="https://github.com/tc39/proposal-class-fields">class fields proposal</a> æ¥çœç•¥è¿™ä¸ªå£°æ˜ï¼š</p>\n<pre   class="language-jsx"><code class="language-jsx">class Checkbox extends React.Component {\n  state = { isOn: true };\n  // ...\n}\n</code></pre><p>æ—©åœ¨ 2015 å¹´ React 0.13 å·²ç»<a href="https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#es7-property-initializers">è®¡åˆ’æ”¯æŒ</a> ã€‚åœ¨å½“æ—¶ï¼Œå£°æ˜ <code>constructor</code> å’Œè°ƒç”¨ <code>super(props)</code> ä¸€ç›´è¢«è§†ä½œæš‚æ—¶çš„è§£å†³æ–¹æ¡ˆï¼Œç›´åˆ°æœ‰åˆé€‚çš„ç±»å­—æ®µå£°æ˜å½¢å¼ã€‚</p>\n<p>ä½†åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå›åˆ° ES2015 é£æ ¼çš„ä»£ç ï¼š</p>\n<pre data-line="3,"  3="" class="language-jsx"><code 3="" class="language-jsx">class Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { isOn: true };\n  }\n  // ...\n}\n</code></pre><p>**ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦è°ƒç”¨ <code>super</code>ï¼Œæˆ‘ä»¬å¯ä»¥ä¸è¿™ä¹ˆåšå—ï¼Ÿé‚£ä¹ˆåœ¨æˆ‘ä»¬è°ƒç”¨å®ƒæ—¶ä¸ä¼ å…¥ <code>props</code>ï¼Œåˆä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿä¼šæœ‰å…¶ä»–çš„ç¼ºçœå‚æ•°å—ï¼Ÿ**æ¥æ¥ä¸‹æˆ‘ä»¬å°±è§£å¼€è¿™ä¸€ç³»åˆ—è°œé¢˜ã€‚</p>\n<hr>\n<p>åœ¨ JavaScript ä¸­ï¼Œ<code>super</code> æŒ‡çš„æ˜¯çˆ¶ç±»ï¼ˆå³è¶…ç±»ï¼‰çš„æ„é€ å‡½æ•°ã€‚ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒæŒ‡å‘äº† <code>React.Component</code> çš„å®ç°ã€‚ï¼‰</p>\n<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¹‹å‰ï¼Œä½ æ˜¯ä¸èƒ½åœ¨ constructor ä¸­ä½¿ç”¨ <code>this</code> å…³é”®å­—çš„ã€‚JavaScript ä¸å…è®¸è¿™ä¸ªè¡Œä¸ºã€‚</p>\n<pre   class="language-jsx"><code class="language-jsx">class Checkbox extends React.Component {\n  constructor(props) {\n    // ğŸ”´  è¿˜ä¸èƒ½ä½¿ç”¨ `this`\n    super(props);\n    // âœ…  ç°åœ¨å¯ä»¥äº†\n    this.state = { isOn: true };\n  }\n  // ...\n}\n</code></pre><p>JavaScript æœ‰è¶³å¤Ÿåˆç†çš„åŠ¨æœºæ¥å¼ºåˆ¶ä½ åœ¨æ¥è§¦ <code>this</code> ä¹‹å‰æ‰§è¡Œçˆ¶ç±»æ„é€ å‡½æ•°ã€‚è€ƒè™‘è€ƒè™‘ä¸€äº›ç±»å±‚æ¬¡ç»“æ„çš„ä¸œè¥¿ï¼š</p>\n<pre   class="language-jsx"><code class="language-jsx">class Person {\n  constructor(name) {\n    this.name = name;\n  }\n}\n\nclass PolitePerson extends Person {\n  constructor(name) {\n    this.greetColleagues(); // ğŸ”´  è¿™æ˜¯ç¦æ­¢çš„ï¼Œå¾€åè§åŸå› \n    super(name);\n  }\n  greetColleagues() {\n    alert(\'Good morning folks!\');\n  }\n}\n</code></pre><p>è¯•æƒ³ä¸€ä¸‹ï¼Œåœ¨è°ƒç”¨ <code>super</code> ä¹‹å‰ä½¿ç”¨ <code>this</code> ä¸è¢«ç¦æ­¢çš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæœˆåï¼Œæˆ‘ä»¬å¯èƒ½åœ¨ <code>greetColleagues</code> æ‰“å°çš„æ¶ˆæ¯ä¸­ä½¿ç”¨äº† person çš„ name å±æ€§ï¼š</p>\n<pre   class="language-jsx"><code class="language-jsx">  greetColleagues() {\n    alert(\'Good morning folks!\');\n    alert(\'My name is \' + this.name + \', nice to meet you!\');\n  }\n</code></pre><p>ä½†æ˜¯æˆ‘ä»¬å¹¶æœªæƒ³èµ· <code>this.greetColleagues</code> åœ¨ <code>super()</code> ç»™ <code>this.name</code> èµ‹å€¼å‰å°±å·²ç»æ‰§è¡Œã€‚<code>this.name</code> æ­¤æ—¶ç”šè‡³å°šæœªå®šä¹‰ã€‚å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·çš„ä»£ç éš¾ä»¥å¾€ä¸‹æ¨æ•²ã€‚</p>\n<p>ä¸ºäº†é¿å…è½å…¥è¿™ä¸ªé™·é˜±ï¼Œ**JavaScript å¼ºåˆ¶ä½ åœ¨ä½¿ç”¨ <code>this</code> ä¹‹å‰å…ˆè¡Œè°ƒç”¨ <code>super</code>ã€‚**è®©çˆ¶ç±»æ¥å®Œæˆè¿™ä»¶äº‹æƒ…ï¼ï¼š</p>\n<pre   class="language-jsx"><code class="language-jsx">  constructor(props) {\n    super(props);\n    // âœ… èƒ½ä½¿ç”¨ `this` äº†\n    this.state = { isOn: true };\n  }\n</code></pre><p>è¿™é‡Œç•™ä¸‹äº†å¦ä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä¼ å…¥ <code>props</code> ï¼Ÿ</p>\n<hr>\n<p>ä½ æˆ–è®¸ä¼šæƒ³åˆ°ï¼Œä¸ºäº†è®© React.Component æ„é€ å‡½æ•°èƒ½å¤Ÿåˆå§‹åŒ– <code>this.props</code>ï¼Œå°† <code>props</code> ä¼ å…¥ <code>super</code> æ˜¯å¿…é¡»çš„ï¼š</p>\n<pre   class="language-jsx"><code class="language-jsx">// React å…§éƒ¨\nclass Component {\n  constructor(props) {\n    this.props = props;\n    // ...\n  }\n}\n</code></pre><p>è¿™å‡ ä¹å°±æ˜¯çœŸç›¸äº† â€” ç¡®ç„¶ï¼Œå®ƒæ˜¯ <a href="https://github.com/facebook/react/blob/1d25aa5787d4e19704c049c3cfa985d3b5190e0d/packages/react/src/ReactBaseClasses.js#L22">è¿™æ ·åš</a> çš„ã€‚</p>\n<p>ä½†æœ‰äº›æ‰‘æœ”è¿·ç¦»çš„æ˜¯ï¼Œå³ä¾¿ä½ è°ƒç”¨ <code>super()</code> çš„æ—¶å€™æ²¡æœ‰ä¼ å…¥ <code>props</code>ï¼Œä½ ä¾ç„¶èƒ½å¤Ÿåœ¨ <code>render</code> å‡½æ•°æˆ–å…¶ä»–æ–¹æ³•ä¸­è®¿é—®åˆ° <code>this.props</code>ã€‚ï¼ˆå¦‚æœä½ è´¨ç–‘è¿™ä¸ªæœºåˆ¶ï¼Œå°è¯•ä¸€ä¸‹å³å¯ï¼‰</p>\n<p>é‚£ä¹ˆè¿™æ˜¯æ€ä¹ˆåšåˆ°çš„å‘¢ï¼Ÿäº‹å®è¯æ˜ï¼ŒReact åœ¨è°ƒç”¨æ„é€ å‡½æ•°åä¹Ÿç«‹å³å°† <code>props</code> èµ‹å€¼åˆ°äº†å®ä¾‹ä¸Šï¼š**</p>\n<pre   class="language-jsx"><code class="language-jsx">  // React å†…éƒ¨\n  const instance = new YourComponent(props);\n  instance.props = props;\n</code></pre><p>å› æ­¤å³ä¾¿ä½ å¿˜è®°äº†å°† <code>props</code> ä¼ ç»™ <code>super()</code>ï¼ŒReact ä¹Ÿä»ç„¶ä¼šåœ¨ä¹‹åå°†å®ƒå®šä¹‰åˆ°å®ä¾‹ä¸Šã€‚è¿™ä¹ˆåšæ˜¯æœ‰åŸå› çš„ã€‚</p>\n<p>å½“ React å¢åŠ äº†å¯¹ç±»çš„æ”¯æŒæ—¶ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†æœåŠ¡äº ES6ã€‚å…¶ç›®æ ‡æ˜¯å°½å¯èƒ½å¹¿æ³›åœ°æ”¯æŒç±»æŠ½è±¡ã€‚å½“æ—¶æˆ‘ä»¬ <a href="https://reactjs.org/blog/2015/01/27/react-v0.13.0-beta-1.html#other-languages">ä¸æ¸…æ¥š</a>  ClojureScriptï¼ŒCoffeeScriptï¼ŒES6ï¼ŒFableï¼ŒScala.jsï¼ŒTypeScript ç­‰è§£æ±ºæ–¹æ¡ˆæ˜¯å¦‚ä½•æˆåŠŸçš„å®è·µç»„ä»¶å®šä¹‰çš„ã€‚å› è€Œ React åˆ»æ„åœ°æ²¡æœ‰æ˜¾å¼è¦æ±‚è°ƒç”¨ <code>super()</code> â€”â€” å³ä¾¿ ES6 è‡ªèº«å°±åŒ…å«è¿™ä¸ªæœºåˆ¶ã€‚</p>\n<p>è¿™æ„å‘³ç€ä½ èƒ½å¤Ÿç”¨ <code>super()</code> ä»£æ›¿ <code>super(props)</code> å—ï¼Ÿ</p>\n<p><strong>æœ€å¥½ä¸è¦ï¼Œæ¯•ç«Ÿè¿™æ ·å†™åœ¨é€»è¾‘ä¸Šå¹¶ä¸æ˜ç¡®</strong>ç¡®ç„¶ï¼ŒReact ä¼šåœ¨æ„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•<em>ä¹‹å</em>ç»™ <code>this.props</code> èµ‹å€¼ã€‚ä½†å¦‚æ­¤ä¸ºä¹‹ä¼šä½¿å¾— <code>this.props</code> åœ¨ <code>super</code> è°ƒç”¨<em>ä¸€ç›´åˆ°æ„é€ å‡½æ•°ç»“æŸæœŸé—´</em>å€¼ä¸º undefinedã€‚</p>\n<pre data-line="14,"  14="" class="language-jsx"><code 14="" class="language-jsx">// React å…§éƒ¨\nclass Component {\n  constructor(props) {\n    this.props = props;\n    // ...\n  }\n}\n\n// ä½ çš„ç¨‹å¼ç¢¼å…§éƒ¨\nclass Button extends React.Component {\n  constructor(props) {\n    super(); // ğŸ˜¬ æˆ‘ä»¬å¿˜äº†ä¼ å…¥ props\n    console.log(props);      // âœ… {}\n    console.log(this.props); // ğŸ˜¬ æœªå®šä¹‰\n  }\n  // ...\n}\n</code></pre><p>å¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­è°ƒç”¨äº†å…¶ä»–çš„å†…éƒ¨æ–¹æ³•ï¼Œé‚£ä¹ˆä¸€æ—¦å‡ºé”™è¿™ä¼šä½¿å¾—è°ƒè¯•è¿‡ç¨‹é˜»åŠ›æ›´å¤§ã€‚<strong>è¿™å°±æ˜¯æˆ‘å»ºè®®å¼€å‘è€…ä¸€å®šæ‰§è¡Œ <code>super(props)</code> çš„åŸå› ï¼Œå³ä½¿ç†è®ºä¸Šè¿™å¹¶éå¿…è¦ï¼š</strong></p>\n<pre   class="language-jsx"><code class="language-jsx">class Button extends React.Component {\n  constructor(props) {\n    super(props); // âœ… ä¼ å…¥ props\n    console.log(props);      // âœ… {}\n    console.log(this.props); // âœ… {}\n  }\n  // ...\n}\n</code></pre><p>ç¡®ä¿äº† <code>this.props</code> åœ¨æ„é€ å‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹å‰å·²è¢«èµ‹å€¼ã€‚</p>\n<hr>\n<p>æœ€åï¼Œè¿˜æœ‰ä¸€ç‚¹æ˜¯ React çˆ±å¥½è€…é•¿æœŸä»¥æ¥çš„å¥½å¥‡ä¹‹å¤„ã€‚</p>\n<p>ä½ ä¼šå‘ç°å½“ä½ åœ¨ç±»ä¸­ä½¿ç”¨ Context API ï¼ˆæ— è®ºæ˜¯æ—§ç‰ˆçš„ <code>contextTypes</code> æˆ–æ˜¯åœ¨ React 16.6 æ›´æ–°çš„æ–°ç‰ˆ <code>contextTypes</code>ï¼‰çš„æ—¶å€™ï¼Œ<code>context</code> æ˜¯ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ„é€ å‡½æ•°çš„ã€‚</p>\n<p>é‚£ä¹ˆä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸èƒ½è½¬è€Œå†™æˆ <code>super(props, context)</code> å‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶å¯ä»¥ï¼Œä½† context çš„ä½¿ç”¨é¢‘ç‡è¾ƒä½ï¼Œå› è€Œå¹¶æ²¡æœ‰æ˜è¿™ä¸ªå‘ã€‚</p>\n<p><strong>class fields proposal å‡ºå°åï¼Œè¿™äº›å‘å¤§éƒ¨åˆ†éƒ½ä¼šè‡ªç„¶åœ°æ¶ˆå¤±</strong>åœ¨æ²¡æœ‰æ˜¾ç¤ºçš„å®šä¹‰æ„é€ å‡½æ•°çš„æƒ…å†µä¸‹ï¼Œä»¥ä¸Šçš„å±æ€§éƒ½ä¼šè¢«è‡ªåŠ¨åœ°åˆå§‹åŒ–ã€‚è¿™ä½¿å¾—åƒ <code>state = {}</code> è¿™ç±»è¡¨è¾¾å¼èƒ½å¤Ÿåœ¨éœ€è¦çš„æƒ…å†µä¸‹å¼•ç”¨ <code>this.props</code> å’Œ <code>this.context</code> çš„å†…å®¹ã€‚</p>\n<p>ç„¶è€Œï¼Œæœ‰äº† Hooks ä»¥åï¼Œæˆ‘ä»¬å‡ ä¹å°±ä¸éœ€è¦ <code>super</code> å’Œ <code>this</code> äº†ã€‚ä½†é‚£å°±æ˜¯å¦ä¸€ä¸ªä¸‹åˆçš„èŒ¶ç‚¹äº†ã€‚</p>\n',frontmatter:"title: ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å†™ super(props) ï¼Ÿ\ndate: '2018-11-30'\nspoiler: ç»“å°¾å¤„æœ‰å½©è›‹ã€‚\nfeatured: true",link:s,next:{title:"Why Do We Write super(props)?",date:e,spoiler:"Thereâ€™s a twist at the end.",link:"/post/why-do-we-write-super-props",min2read:n,wordcount:938},prev:{title:"Why Do React Elements Have a $$typeof Property?",date:"2018-12-03",spoiler:"It has something to do with security.",link:"/post/why-do-react-elements-have-typeof-property",min2read:"â˜•ï¸ 6 min read",wordcount:"1k"}}}],error:null,serverRendered:!0}}("2018-11-30",0,"/post/why-do-we-write-super-props-zh","â˜•ï¸ 5 min read")